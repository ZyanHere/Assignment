(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9287],{36591:(e,l,t)=>{Promise.resolve().then(t.bind(t,88178))},88178:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>c});var s=t(95155),a=t(76046),n=t(5565),r=t(83391),o=t(12115),i=t(2615);function c(){let[e,l]=(0,o.useState)(!1),t=(0,a.useRouter)();(0,r.wA)();let{coordinates:c,address:d,city:u,phone:h,password:m}=(0,r.d4)(e=>e.user);if((0,o.useEffect)(()=>{l(!0)},[]),!e)return null;(0,o.useEffect)(()=>{(null==c?void 0:c.lat)&&(null==c?void 0:c.lng)||(toast.error("Location not found. Please allow access again."),t.push("/location"))},[c,t]);let x=async()=>{if(!h||!m){toast.error("Missing credentials. Please sign up again"),t.push("/auth/signup");return}try{let e=await (0,i.signIn)("credentials",{redirect:!1,phone:h,password:m});e.ok&&!e.error&&(await axios.get("/lmd/api/v1/csrf-token",{withCredentials:!0}),toast.success("Login successful!"),t.push("/"))}catch(e){toast.error("Something went wrong during login."),console.error(e)}};return(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsxs)("div",{className:"w-1/2 flex flex-col items-center justify-center px-10 relative",children:[(0,s.jsx)("button",{onClick:()=>t.back(),className:"absolute left-6 top-6 text-yellow-600 text-2xl",children:"â†"}),(0,s.jsx)("h2",{className:"text-[28px] font-semibold mb-6",children:"Location Information"}),(0,s.jsxs)("div",{className:"relative w-[90%] h-[350px] rounded-lg overflow-hidden shadow-md",children:[(null==c?void 0:c.lat)&&(null==c?void 0:c.lng)?(0,s.jsx)("iframe",{className:"w-full h-full",src:"https://maps.google.com/maps?q=".concat(c.lat,",").concat(c.lng,"&z=16&output=embed"),loading:"lazy",title:"Location Map"}):(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:"Loading map..."}),(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[100%] text-center",children:[(0,s.jsx)("div",{className:"bg-black text-white text-xs p-1 rounded mb-1 shadow",children:"Order will be delivered here"}),(0,s.jsx)("div",{className:"text-[24px] font-bold text-purple-600",children:u||"Unknown"})]})]}),(0,s.jsxs)("div",{className:"w-[90%] bg-white p-4 rounded-xl mt-6 shadow-md border",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:u}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:d}),(0,s.jsx)("button",{onClick:x,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-medium py-2 mt-4 rounded-lg",children:"Confirm & Continue"})]})]}),(0,s.jsx)("div",{className:"hidden md:block w-1/2 shrink-0 rounded-l-[40px] relative",children:(0,s.jsx)(n.default,{src:"/auth-asset/hero-bg.png",alt:"Background",layout:"fill",objectFit:"cover",className:"rounded-l-[40px]"})})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[3738,2615,3391,8441,6587,7358],()=>l(36591)),_N_E=e.O()}]);